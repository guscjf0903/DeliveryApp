<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Signup</title>
    <script>
        // function addUserRequest(requestObject) {
        //     fetch('/user/signup', {
        //         method: 'POST',
        //         headers: {
        //             'Content-Type': 'application/json'
        //         },
        //         body: JSON.stringify(requestObject)
        //     })
        //         .then(response => {
        //             if (response.status === 200) {
        //                 alert("회원가입이 완료되었습니다.");
        //             } else {
        //                 console.error('request failed');
        //             }
        //         })
        //         .catch(error => {
        //             console.error('request failed', error);
        //         });
        //
        //     return false;
        // }

        function toggleCompanyFields() {
            var storeCheckbox = document.querySelector('input[name=store]');
            var companyNameInput = document.querySelector('input[name=companyName]');
            var addressInput = document.querySelector('input[name=address]');

            if (storeCheckbox.checked) {
                companyNameInput.disabled = false;
                addressInput.disabled = false;
            } else {
                companyNameInput.disabled = true;
                addressInput.disabled = true;
            }
        }

    </script>
</head>
<body>
<h2> Sign Up </h2>

<form th:action="@{/user/signup}" th:object = "${signupDTO}" method="post">
    <label>아이디 : </label>
    <input type="text" name="userName" minlength="4" maxlength="20" th:field="*{userName}" required /><br>

    <label>Password:</label><input type="password" name="password" th:field="*{password}" minlength="8" maxlength="20" required /><br>

    <label>Email:</label><input type="text" name="email" th:field="*{email}" required/><br>

    <label>Store :</label><input type="checkbox" name="store" th:field="*{store}" onclick="toggleCompanyFields()"/>
    <label>User :</label><input type="checkbox" name="user" th:field="*{user}" /><br>

    <label>CompanyName :</label><input type="text" name="companyName" th:field="*{companyName}" disabled/><br>

    <label>CompanyAddress :</label><input type="text" name="address" th:field="*{address}" disabled/><br>

    <input type="hidden" id="roles" name="roles" />
    <button type="submit">Sign Up</button>
</form>

</body>
</html>
